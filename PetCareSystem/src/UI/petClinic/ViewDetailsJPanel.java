/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JPanel.java to edit this template
 */
package UI.petClinic;

import Business.Enterprise.Enterprise;
import Business.Pet.Pet;
import Business.Pet.PetOwner;
import Business.PetClinicOrganization.VetDoctorOrganization;
import Business.UserAccount.UserAccount;
import Business.WorkQueue.HealthCareCheckRequest;
import java.awt.CardLayout;
import java.awt.Component;
import javax.swing.JOptionPane;
import javax.swing.JPanel;

/**
 *
 * @author jingyangwang
 */
public class ViewDetailsJPanel extends javax.swing.JPanel {
    
    private JPanel userProcessContainer;
    private HealthCareCheckRequest request;
    private Enterprise enterprise;
    
    /**
     * Creates new form ViewDetailsJPanel
     */
    public ViewDetailsJPanel(JPanel userProcessContainer, HealthCareCheckRequest request,Enterprise enterprise) {
        
        initComponents();
        this.userProcessContainer = userProcessContainer;
        this.request = request;
        this.enterprise = enterprise;
        
        populateData();
        setViewMode(); 
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        title = new javax.swing.JLabel();
        lblSymptom = new javax.swing.JLabel();
        lblMessage = new javax.swing.JLabel();
        fieldSymptom = new javax.swing.JTextField();
        fieldMessage = new javax.swing.JTextField();
        lblPet = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();
        fieldPetName = new javax.swing.JTextField();
        fieldSpieces = new javax.swing.JTextField();
        fieldAge = new javax.swing.JTextField();
        fieldWeight = new javax.swing.JTextField();
        fieldFoodAllergy = new javax.swing.JTextField();
        lblPetName = new javax.swing.JLabel();
        lblSpecies = new javax.swing.JLabel();
        lblAge = new javax.swing.JLabel();
        lblWeight = new javax.swing.JLabel();
        lblFoodAllergy = new javax.swing.JLabel();
        jSeparator1 = new javax.swing.JSeparator();
        lblPetOwnerName = new javax.swing.JLabel();
        lblPhone = new javax.swing.JLabel();
        lblEmail = new javax.swing.JLabel();
        lblAddress = new javax.swing.JLabel();
        lblEmergencyContact = new javax.swing.JLabel();
        fieldPetOwnerName = new javax.swing.JTextField();
        fieldEmail = new javax.swing.JTextField();
        fieldPhone = new javax.swing.JTextField();
        fieldAddress = new javax.swing.JTextField();
        fieldEmergencyContact = new javax.swing.JTextField();
        lblInsuranceCompany = new javax.swing.JLabel();
        lblPolicyID = new javax.swing.JLabel();
        lblCoverageLevel = new javax.swing.JLabel();
        lblExpirationDate = new javax.swing.JLabel();
        fieldInsuranceCompany = new javax.swing.JTextField();
        fieldPolicyID = new javax.swing.JTextField();
        fieldCoverageLevel = new javax.swing.JTextField();
        fieldExpirationDate = new javax.swing.JTextField();
        comboDoctors = new javax.swing.JComboBox<>();
        lblSelect = new javax.swing.JLabel();
        fieldAssignDoctor = new javax.swing.JButton();
        btnBack = new javax.swing.JButton();

        title.setFont(new java.awt.Font("Helvetica Neue", 1, 15)); // NOI18N
        title.setText("View Details");

        lblSymptom.setText("Symptom");

        lblMessage.setText("Message");

        lblPet.setText("Pet");

        jLabel2.setText("Pet Owner");

        jLabel3.setText("Pet Insurance");

        lblPetName.setText("Pet Name");

        lblSpecies.setText("Species");

        lblAge.setText("Age");

        lblWeight.setText("Weight");

        lblFoodAllergy.setText("Food Allergy");

        lblPetOwnerName.setText("Pet Owner Name");

        lblPhone.setText("Phone");

        lblEmail.setText("Email");

        lblAddress.setText("Address");

        lblEmergencyContact.setText("Emergency Contact");

        lblInsuranceCompany.setText("Insurance Company");

        lblPolicyID.setText("Policy ID");

        lblCoverageLevel.setText("Coverage Level");

        lblExpirationDate.setText("Expiration Date");

        comboDoctors.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Doctor William Hanks - Surgery", "Doctor Hanna King - Internal Medicine", "Doctor July Oven - Orthopedics", "Doctor Anna Watterson - Gynecology", "Doctor Bella Stone - Dermatology", "Doctor Kevin Harper - General Vet" }));

        lblSelect.setText("Please select a Doctor ");

        fieldAssignDoctor.setText("Assign Doctor to the pet patient");
        fieldAssignDoctor.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                fieldAssignDoctorActionPerformed(evt);
            }
        });

        btnBack.setText("<<< Back");
        btnBack.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnBackActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(118, 118, 118)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                        .addComponent(lblSymptom)
                        .addGap(56, 56, 56))
                    .addGroup(layout.createSequentialGroup()
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(title)
                            .addComponent(lblMessage))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(fieldSymptom, javax.swing.GroupLayout.DEFAULT_SIZE, 486, Short.MAX_VALUE)
                            .addComponent(fieldMessage))
                        .addGap(182, 182, 182))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                        .addComponent(btnBack)
                        .addGap(50, 50, 50))))
            .addGroup(layout.createSequentialGroup()
                .addGap(105, 105, 105)
                .addComponent(lblPet)
                .addGap(234, 234, 234)
                .addComponent(jLabel2)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(jLabel3)
                .addGap(91, 91, 91))
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addGap(27, 27, 27)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(lblPetName)
                    .addComponent(lblSpecies)
                    .addComponent(lblAge)
                    .addComponent(lblWeight)
                    .addComponent(lblFoodAllergy))
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(17, 17, 17)
                        .addComponent(lblSelect))
                    .addGroup(layout.createSequentialGroup()
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(fieldFoodAllergy, javax.swing.GroupLayout.PREFERRED_SIZE, 115, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                                .addComponent(fieldSpieces, javax.swing.GroupLayout.PREFERRED_SIZE, 115, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addComponent(fieldPetName, javax.swing.GroupLayout.PREFERRED_SIZE, 115, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addComponent(fieldAge, javax.swing.GroupLayout.PREFERRED_SIZE, 115, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addComponent(fieldWeight, javax.swing.GroupLayout.PREFERRED_SIZE, 115, javax.swing.GroupLayout.PREFERRED_SIZE)))))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 48, Short.MAX_VALUE)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                    .addGroup(layout.createSequentialGroup()
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                                    .addComponent(lblPetOwnerName)
                                    .addGap(42, 42, 42))
                                .addGroup(layout.createSequentialGroup()
                                    .addComponent(lblPhone)
                                    .addGap(105, 105, 105)))
                            .addGroup(layout.createSequentialGroup()
                                .addComponent(lblEmail)
                                .addGap(109, 109, 109)))
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(fieldPetOwnerName)
                            .addComponent(fieldPhone)
                            .addComponent(fieldEmail, javax.swing.GroupLayout.PREFERRED_SIZE, 107, javax.swing.GroupLayout.PREFERRED_SIZE)))
                    .addGroup(javax.swing.GroupLayout.Alignment.LEADING, layout.createSequentialGroup()
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(lblAddress)
                            .addComponent(lblEmergencyContact))
                        .addGap(27, 27, 27)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(fieldAddress, javax.swing.GroupLayout.PREFERRED_SIZE, 107, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(fieldEmergencyContact, javax.swing.GroupLayout.PREFERRED_SIZE, 107, javax.swing.GroupLayout.PREFERRED_SIZE))))
                .addGap(68, 68, 68)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(lblInsuranceCompany)
                    .addComponent(lblPolicyID)
                    .addComponent(lblCoverageLevel)
                    .addComponent(lblExpirationDate))
                .addGap(40, 40, 40)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(fieldInsuranceCompany)
                    .addComponent(fieldPolicyID)
                    .addComponent(fieldCoverageLevel)
                    .addComponent(fieldExpirationDate, javax.swing.GroupLayout.PREFERRED_SIZE, 93, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(34, 34, 34))
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(50, 50, 50)
                        .addComponent(jSeparator1, javax.swing.GroupLayout.PREFERRED_SIZE, 786, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(layout.createSequentialGroup()
                        .addGap(280, 280, 280)
                        .addComponent(comboDoctors, javax.swing.GroupLayout.PREFERRED_SIZE, 237, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(18, 18, 18)
                        .addComponent(fieldAssignDoctor, javax.swing.GroupLayout.PREFERRED_SIZE, 258, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(42, 42, 42)
                        .addComponent(title))
                    .addGroup(layout.createSequentialGroup()
                        .addGap(24, 24, 24)
                        .addComponent(btnBack)))
                .addGap(26, 26, 26)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblSymptom)
                    .addComponent(fieldSymptom, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(lblMessage)
                    .addComponent(fieldMessage, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(27, 27, 27)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblPet)
                    .addComponent(jLabel2)
                    .addComponent(jLabel3))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jSeparator1, javax.swing.GroupLayout.PREFERRED_SIZE, 10, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(lblInsuranceCompany)
                            .addComponent(fieldInsuranceCompany, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(26, 26, 26)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(lblPolicyID)
                            .addComponent(fieldPolicyID, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(35, 35, 35)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(lblCoverageLevel)
                            .addComponent(fieldCoverageLevel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(32, 32, 32)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(lblExpirationDate)
                            .addComponent(fieldExpirationDate, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))
                    .addGroup(layout.createSequentialGroup()
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(lblPetOwnerName)
                            .addComponent(fieldPetOwnerName, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(26, 26, 26)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(lblPhone)
                            .addComponent(fieldPhone, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(35, 35, 35)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(lblEmail)
                            .addComponent(fieldEmail, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(32, 32, 32)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(lblAddress)
                            .addComponent(fieldAddress, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(35, 35, 35)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(lblEmergencyContact)
                            .addComponent(fieldEmergencyContact, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))
                    .addGroup(layout.createSequentialGroup()
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(fieldPetName, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(lblPetName))
                        .addGap(26, 26, 26)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(fieldSpieces, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(lblSpecies))
                        .addGap(35, 35, 35)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(fieldAge, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(lblAge))
                        .addGap(32, 32, 32)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(fieldWeight, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(lblWeight))
                        .addGap(35, 35, 35)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(fieldFoodAllergy, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(lblFoodAllergy))))
                .addGap(51, 51, 51)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(comboDoctors, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(fieldAssignDoctor)
                    .addComponent(lblSelect))
                .addContainerGap(56, Short.MAX_VALUE))
        );
    }// </editor-fold>//GEN-END:initComponents

    private void fieldAssignDoctorActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_fieldAssignDoctorActionPerformed
        // TODO add your handling code here:
        String doctorName = (String) comboDoctors.getSelectedItem();
        if (doctorName == null || doctorName.isEmpty()) {
            JOptionPane.showMessageDialog(null, "Please select a doctor.");
            return;
        }

        // 1.Update request itself
        request.setAssignedDoctor(doctorName);
        request.setStatus("Doctor Assigned");

        // 2. 找到 VetDoctorOrganization
        VetDoctorOrganization doctorOrg = enterprise.getOrganizationDirectory().getOrganizationList()
            .stream().filter(org -> org instanceof VetDoctorOrganization).map(org -> (VetDoctorOrganization) org)
            .findFirst().orElse(null);

        if (doctorOrg == null) {
            JOptionPane.showMessageDialog(null, "Doctor organization not found.");
            return;
        }

        // 3. 在医生账号列表中找到这个医生并把 request 加进去
        doctorOrg.getUserAccountDirectory().getUserAccountList().stream()
            .filter(ua -> ua.getEmployee().getName().equals(doctorName)).findFirst().ifPresent(ua -> {
            ua.getWorkQueue().getWorkRequestList().add(request);
                
            System.out.println("Assigned request to doctor: " + doctorName);
            });

        JOptionPane.showMessageDialog(null, 
            "Doctor assigned successfully:\n" + doctorName);

    }//GEN-LAST:event_fieldAssignDoctorActionPerformed

    private void btnBackActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnBackActionPerformed
        // TODO add your handling code here:
        userProcessContainer.remove(this);

        Component[] componentArray = userProcessContainer.getComponents();
        Component previousComponent = componentArray[componentArray.length - 1];

        if (previousComponent instanceof FrontDeskManagementJPanel) {
            FrontDeskManagementJPanel panel = (FrontDeskManagementJPanel) previousComponent;
            panel.populateTable();   
        }

        CardLayout layout = (CardLayout) userProcessContainer.getLayout();
        layout.previous(userProcessContainer);
    }//GEN-LAST:event_btnBackActionPerformed


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton btnBack;
    private javax.swing.JComboBox<String> comboDoctors;
    private javax.swing.JTextField fieldAddress;
    private javax.swing.JTextField fieldAge;
    private javax.swing.JButton fieldAssignDoctor;
    private javax.swing.JTextField fieldCoverageLevel;
    private javax.swing.JTextField fieldEmail;
    private javax.swing.JTextField fieldEmergencyContact;
    private javax.swing.JTextField fieldExpirationDate;
    private javax.swing.JTextField fieldFoodAllergy;
    private javax.swing.JTextField fieldInsuranceCompany;
    private javax.swing.JTextField fieldMessage;
    private javax.swing.JTextField fieldPetName;
    private javax.swing.JTextField fieldPetOwnerName;
    private javax.swing.JTextField fieldPhone;
    private javax.swing.JTextField fieldPolicyID;
    private javax.swing.JTextField fieldSpieces;
    private javax.swing.JTextField fieldSymptom;
    private javax.swing.JTextField fieldWeight;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JSeparator jSeparator1;
    private javax.swing.JLabel lblAddress;
    private javax.swing.JLabel lblAge;
    private javax.swing.JLabel lblCoverageLevel;
    private javax.swing.JLabel lblEmail;
    private javax.swing.JLabel lblEmergencyContact;
    private javax.swing.JLabel lblExpirationDate;
    private javax.swing.JLabel lblFoodAllergy;
    private javax.swing.JLabel lblInsuranceCompany;
    private javax.swing.JLabel lblMessage;
    private javax.swing.JLabel lblPet;
    private javax.swing.JLabel lblPetName;
    private javax.swing.JLabel lblPetOwnerName;
    private javax.swing.JLabel lblPhone;
    private javax.swing.JLabel lblPolicyID;
    private javax.swing.JLabel lblSelect;
    private javax.swing.JLabel lblSpecies;
    private javax.swing.JLabel lblSymptom;
    private javax.swing.JLabel lblWeight;
    private javax.swing.JLabel title;
    // End of variables declaration//GEN-END:variables

    private void populateData() {
        
            fieldSymptom.setText(request.getSymptom());
    fieldMessage.setText(request.getMessage());

    // 1. Pet 
    if (request.getPet() != null) {
        Pet pet = request.getPet();

        fieldPetName.setText(pet.getPetName());
        fieldSpieces.setText(pet.getSpecies());
        fieldAge.setText(String.valueOf(pet.getAge()));
        fieldWeight.setText(String.valueOf(pet.getWeight()));
        fieldFoodAllergy.setText(pet.getFoodAllergy());

        // 2. Pet Owner
        if (pet.getPetOwner() != null) {
            PetOwner owner = pet.getPetOwner();

            // --- Owner Info ---
            fieldPetOwnerName.setText(owner.getOwnerName());
            fieldPhone.setText(owner.getPhone());
            fieldEmail.setText(owner.getEmail());
            fieldAddress.setText(owner.getAddress());
            fieldEmergencyContact.setText(owner.getEmergencyContact());

            // --- Insurance Info ---
            fieldInsuranceCompany.setText(owner.getInsuranceCompany());
            fieldPolicyID.setText(owner.getPolicyId());
            fieldCoverageLevel.setText(owner.getCoverageLevel());
            fieldExpirationDate.setText(owner.getExpirationDate());
        }
    }
}
    private void setViewMode() {
        
        fieldPetName.setEnabled(false);
        fieldSpieces.setEnabled(false);
        fieldAge.setEnabled(false);
        fieldWeight.setEnabled(false);
        fieldFoodAllergy.setEnabled(false);

        
        fieldPetOwnerName.setEnabled(false);
        fieldPhone.setEnabled(false);
        fieldEmail.setEnabled(false);
        fieldAddress.setEnabled(false);
        fieldEmergencyContact.setEnabled(false);

        
        fieldInsuranceCompany.setEnabled(false);
        fieldPolicyID.setEnabled(false);
        fieldCoverageLevel.setEnabled(false);
        fieldExpirationDate.setEnabled(false);

        
        fieldSymptom.setEnabled(false);
        fieldMessage.setEnabled(false);
        
        comboDoctors.setEnabled(true);
        fieldAssignDoctor.setEnabled(true);
        
        }
    }
